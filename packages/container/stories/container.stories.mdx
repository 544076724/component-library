import { Meta, Story, Canvas, ArgsTable,Preview } from '@storybook/addon-docs/blocks'
import CDhnInfiniteScroll from '../../infiniteScroll'

import CDhnContainer from '../'
import '../../theme-chalk/src/container.scss'

<Meta title='DHNUIDOCS/Container 容器'  />



export const Template  = (args) => ({
  setup () {
    
    return {
      args
    }
  },
  directives:{
    'InfiniteScroll':CDhnInfiniteScroll
  },
  components: { CDhnContainer },
  template: `
  <div>
    <c-dhn-container infinite-scroll-root="true"   infinite-scroll-disabled="disabled"  v-bind="args" v-infinite-scroll="load">
      <ul>
        <li v-for="i in count" style="background:#e8f3fe;margin-bottom:5px">{{ i }}</li>
      </ul>
      <p v-if="loading" style="text-align:center">加载中...</p>
      <p v-if="noMore" style="text-align:center">没有更多了</p>
    </c-dhn-container>
  </div>
  `,
  data(){
    return {
        count: 10,
        loading: false,
     
    }
  },
  computed: {
      noMore () {
        return this.count >= 20
      },
      disabled () {
        return this.loading || this.noMore
      }
  },
  methods: {
    load () {
     
        this.loading = true
        setTimeout(() => {
          this.count += 2
          this.loading = false
        }, 2000)
    },
  }
})



export const Template1  = (args) => ({
  setup () {
    
    return {
      args
    }
  },
  directives:{
    'InfiniteScroll':CDhnInfiniteScroll
  },
  components: { CDhnContainer },
  template: `
  <div>
    <c-dhn-container  style="overflow:auto;height:300px"  infinite-scroll-disabled="disabled"  v-bind="args" v-infinite-scroll="load">
      <ul>
        <li v-for="i in count" style="background:#e8f3fe;margin-bottom:5px">{{ i }}</li>
      </ul>
      <p v-if="loading" style="text-align:center">加载中...</p>
      <p v-if="noMore" style="text-align:center">没有更多了</p>
    </c-dhn-container>
  </div>
  `,
  data(){
    return {
        count: 10,
        loading: false
    }
  },
  computed: {
      noMore () {
        return this.count >= 20
      },
      disabled () {
        return this.loading || this.noMore
      }
  },
  methods: {
    load () {
     
        this.loading = true
        setTimeout(() => {
          this.count += 2
          this.loading = false
        }, 2000)
    }
  }
})

# Container 容器










#### 局部滚动加载 禁用加载 加 滚动指令 InfiniteScroll

配合滚动指令 使用时 需要给绑定指令的元素 一个高度和滚动的样式 ，  如果单纯使用容器的话 把指令v-infinite-scroll和 对应样式去掉就可以了。

<Preview>
    
    <Story name='basic1'>
    { Template1.bind({})}
  </Story>
</Preview>


```javascript
<template>
  <div>
    <c-dhn-container  
      style="overflow:auto;height:300px" 
      infinite-scroll-disabled="disabled"   
      v-infinite-scroll="load">
        <ul>
          <li v-for="i in count" style="background:#e8f3fe;margin-bottom:5px">{{ i }}</li>
        </ul>
        <p v-if="loading" style="text-align:center">加载中...</p>
        <p v-if="noMore" style="text-align:center">没有更多了</p>
    </c-dhn-container>
  </div>
   
</template>
<script>
  import { CDhnInfiniteScroll } from 'c-dhn-act'
  export default {
    data () {
      return {
        count: 10,
        loading: false
      }
    },
    directives:{
      'InfiniteScroll':CDhnInfiniteScroll
    },
    computed: {
      noMore () {
        return this.count >= 20
      },
      disabled () {
        return this.loading || this.noMore
      }
    },
    methods: {
      load () {
          this.loading = true
          setTimeout(() => {
            this.count += 2
            this.loading = false
          }, 2000)
      }
    }
  }
</script>
```

看上面例子   配合infinite-scroll-disabled 是否禁用属性  我们可以自由控制 load函数是否触发 。

通过这个例子  我们可以看到滚动加载的例子  我们通过定时器模拟了请求， 通过infinite-scroll-disabled属性 来展示加载中还是 没有数据了。

默认局部滚动加载infinite-scroll-immediate为true,默认一上来就会调取load函数来填满容器,你可通过设置它为false来,手动控制load函数填充容器.






#### 整体滚动加载 禁用加载 加 滚动指令 InfiniteScroll 这个例子是window滚动到底加载

<Preview>
    
    <Story name='basic'>
    { Template.bind({})}
  </Story>
</Preview>

```javascript
<template>
  <div>
    <c-dhn-container 
      infinite-scroll-root="true"    
      infinite-scroll-disabled="disabled"   
      v-infinite-scroll="load">
        <ul>
          <li v-for="i in count" style="background:#e8f3fe;margin-bottom:5px">{{ i }}</li>
        </ul>
        <p v-if="loading" style="text-align:center">加载中...</p>
        <p v-if="noMore" style="text-align:center">没有更多了</p>
    </c-dhn-container>
  </div>
   
</template>
<script>
  import { CDhnInfiniteScroll } from 'c-dhn-act'
  export default {
    data () {
      return {
        count: 10,
        loading: false
      }
    },
    directives:{
      'InfiniteScroll':CDhnInfiniteScroll
    },
    computed: {
      noMore () {
        return this.count >= 20
      },
      disabled () {
        return this.loading || this.noMore
      }
    },
    methods: {
      load () {
          this.loading = true
          setTimeout(() => {
            this.count += 2
            this.loading = false
          }, 2000)
      }
    }
  }
</script>
```

这一种是根元素滚动到底才加载，也就是说是window滚动到底才加载，使用它需要添加属性infinite-scroll-root="true"指定是根元素加载的情况

默认整体滚动加载infinite-scroll-immediate为false,因为是window 所以就不填充了.








### 参数说明




#### InfiniteScroll Attributes


 <table width="100%">
    <thead>
        <tr>
            <th>参数</th>
            <th>说明</th>
            <th>类型</th>
            <th>默认值</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>infinite-scroll-disabled</td>
            <td>是否禁用</td>
            <td>boolean</td>
            <td>false</td>
        </tr>
        <tr>
            <td>infinite-scroll-delay</td>
            <td>节流时延，单位为ms</td>
            <td>number</td>
            <td>200</td>
        </tr>
        <tr>
            <td>infinite-scroll-distance</td>
            <td>触发加载的距离阈值，单位为px</td>
            <td>number</td>
            <td>0</td>
        </tr>
        <tr>
            <td>infinite-scroll-immediate</td>
            <td>是否立即执行加载方法，以防初始状态下内容无法撑满容器。</td>
            <td>boolean</td>
            <td>true</td>
        </tr>
        <tr>
            <td>infinite-scroll-root</td>
            <td>是否是根元素滚动到底再加载，也就是window滚动到底</td>
            <td>boolean</td>
            <td>false</td>
        </tr>
    </tbody>
    </table>







